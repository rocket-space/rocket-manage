/*
 * gmp v1.1.12
 * (c) 2017 zeromike
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.GMP=e()}(this,function(){"use strict";function t(t){t._assignPros({_init:function(t){t=t||{},this._uid="g"+p++,f(this,t),this.el=this.el||"body",this._eventsMapList={},this._initState(),this._initEvents(),this._initEls(),this._callHook("init")}})}function e(t){return function(e){return v.toString.call(e)==="[object "+t+"]"}}function n(t){t._assignPros({_initEvents:function(){r(this,this.events)},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this._uid),this},delegateEvents:function(t){if(t||(t=this.events),!t)return this;this.undelegateEvents();for(var e in t)if(t.hasOwnProperty(e)){var n=t[e];if(y.isFunction(n)||(n=this[n]),!n)continue;var r=e.match(_);this.delegate(r[1],r[2],n.bind(this))}return this},undelegate:function(t,e,n){return this.$el.off(t+".delegateEvents"+this._uid,e,n),this},delegate:function(t,e,n){return this.$el.on(t+".delegateEvents"+this._uid,e,n),this},_setElement:function(e){this.$el=e instanceof t.$()?e:t.$()(e),this.el=this.$el[0]},_callHook:function(t){var e=this[t];t&&e&&e.call(this)},on:function(t,e){var n=this._uid+t;this._eventsMapList[n]?this._eventsMapList[n].push(e):this._eventsMapList[n]=[e]},off:function(t){var e=this._uid+t;this._eventsMapList[e]&&(this._eventsMapList[e]=[])},trigger:function(t,e){var n=this,r=this._uid+t,i=this._eventsMapList[r];i&&i.forEach(function(t){t.apply(n,[e])})},destroy:function(){this.undelegateEvents(),this.$el.empty()}})}function r(t,e){return t.undelegateEvents(),t._setElement(t.el),t.delegateEvents(e),t}function i(t){t._assignPros({_initState:function(){this._initData()},_initData:function(){var t=this;this._data=this.data||{};for(var e=Object.keys(this._data),n=this,r=function(){var r=e[i],o=t._data[e[i]];return u=Object.getOwnPropertyDescriptor(t._data,r),u&&u.configurable===!1?"continue":void Object.defineProperty(n._data,r,{enumerable:!0,configurable:!0,get:function(){return o},set:function(t){var e=o;y.equal(t,e)||(o=t,n.trigger("change:"+r))}})},i=0,o=e.length;i<o;i++){var u;r()}},_initEls:function(){var e=this;this.els&&Object.keys(this.els).forEach(function(n){e.els[n]=e.els[n]instanceof t.$()?e.els[n]:t.$()(e.els[n])})}})}function o(t){var e={},n=function(t,n,r){e[t]=e[t]||[],e[t].push({scope:r||this,handler:n})},r=function(t,n,r){var i=e[t];r=r||this,i&&(e[t]=e[t].filter(function(t){return!!(n&&n!==t.callback||r&&r!==t.scope)}))},i=function(t){var n,r,i,o=e[t];if(o){for(var u=arguments.length,s=Array(u>1?u-1:0),c=1;c<u;c++)s[c-1]=arguments[c];for(n=0,i=o.length;n<i;n++)r=o[n],r.handler.apply(r.scope,s||[])}};t.GMPEvents={on:n,off:r,trigger:i,_events:e}}function u(t){var e=/<[^>]+>/g;S=e.test(t)?t:document.getElementById(t).innerHTML||"";var n=RegExp([(m.escape||O).source,(m.interpolate||O).source,(m.evaluate||O).source].join("|")+"|$","g"),r=0,i="__p+='";S.replace(n,function(t,e,n,o,u){return i+=S.slice(r,u).replace(k,P),r=u+t.length,e?i+="'+\n((__t=("+e+"))==null?'':_t.escape(__t))+\n'":n?i+="'+\n((__t=("+n+"))==null?'':__t)+\n'":o&&(i+="';\n"+o+"\n__p+='"),t}),i+="';\n",i="with(obj||{}){\n"+i+"}\n",i="var __t,__p='',__j=Array.prototype.join,$utils=this,$helpers=$utils.$helpers,print=function(){__p+=__j.call(arguments,'');};\n"+i+"return [__p];\n";try{var o=new Function("obj",i);o.prototype=x}catch(u){throw u.source=i,u}var s=function(t){try{var e=new o(t);if(e.length>0)return e[0]+""}catch(n){console.log("\u5185\u90e8\u51fa\u9519\uff1a",n)}},c="obj";return s.source="function("+c+"){\n"+i+"}",s}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c=(function(){function t(t){this.value=t}function e(e){function n(t,e){return new Promise(function(n,i){var s={key:t,arg:e,resolve:n,reject:i,next:null};u?u=u.next=s:(o=u=s,r(t,e))})}function r(n,o){try{var u=e[n](o),s=u.value;s instanceof t?Promise.resolve(s.value).then(function(t){r("next",t)},function(t){r("throw",t)}):i(u.done?"return":"normal",u.value)}catch(c){i("throw",c)}}function i(t,e){switch(t){case"return":o.resolve({value:e,done:!0});break;case"throw":o.reject(e);break;default:o.resolve({value:e,done:!1})}o=o.next,o?r(o.key,o.arg):u=null}var o,u;this._invoke=n,"function"!=typeof e["return"]&&(this["return"]=void 0)}return"function"==typeof Symbol&&Symbol.asyncIterator&&(e.prototype[Symbol.asyncIterator]=function(){return this}),e.prototype.next=function(t){return this._invoke("next",t)},e.prototype["throw"]=function(t){return this._invoke("throw",t)},e.prototype["return"]=function(t){return this._invoke("return",t)},{wrap:function(t){return function(){return new e(t.apply(this,arguments))}},await:function(e){return new t(e)}}}(),function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}),a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),f=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},l=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},h=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},p=0,v=Object.prototype,y={isFunction:function(t){return e("Function")(t)},isObject:function(t){return e("Object")(t)},has:function(t,e){return null!=t&&v.hasOwnProperty.call(t,e)},create:function(t,e){return this.isObject(e)&&Object.keys(e).forEach(function(n){t[n]=e[n]}),t},defaults:function(t,e){var n=Object.keys(e);return n.forEach(function(n){t[n]&&void 0!==t[n]||(t[n]=e[n])}),t},mergeData:function(t,e){var n=void 0,r=void 0,i=void 0;for(n in e)r=t[n],i=e[n],Object.hasOwnProperty(t,n)?this.isObject(r)&&this.isObject(i)&&this.mergeData(r,i):Object.defineProperty(t,n,{enumerable:!0,configurable:!0,writable:!0,value:i})},equal:function(t,e,n,r){if(t===e)return 0!==t||1/t===1/e;if(null==t||null==e)return t===e;var i=v.toString,o=i.call(t);if(o!==i.call(e))return!1;switch(o){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!==+t?+e!==+e:0===+t?1/+t===1/e:+t===+e;case"[object Date]":case"[object Boolean]":return+t===+e}var u="[object Array]"===o;if(!u){if("object"!=("undefined"==typeof t?"undefined":s(t))||"object"!=("undefined"==typeof e?"undefined":s(e)))return!1;var c=t.constructor,a=e.constructor;if(c!==a&&!(this.isFunction(c)&&c instanceof c&&this.isFunction(a)&&a instanceof a)&&"constructor"in t&&"constructor"in e)return!1}n=n||[],r=r||[];for(var f=n.length;f--;)if(n[f]===t)return r[f]===e;if(n.push(t),r.push(e),u){if(f=t.length,f!==e.length)return!1;for(;f--;)if(!this.equal(t[f],e[f],n,r))return!1}else{var l,h=Object.keys(t);if(f=h.length,Object.keys(e).length!==f)return!1;for(;f--;)if(l=h[f],!this.has(e,l)||!this.equal(t[l],e[l],n,r))return!1}return n.pop(),r.pop(),!0}},_=/^(\S+)\s*(.*)$/,d=function(){function t(e){c(this,t),this._init(e)}return a(t,[{key:"_init",value:function(t){var e=this;if(!t)return Object.create(null);var n=Object.keys(t);this.state=t;for(var r=this,i=function(){var t=n[o],i=e.state[n[o]];return s=Object.getOwnPropertyDescriptor(e.state,t),s&&s.configurable===!1?"continue":void Object.defineProperty(r.state,t,{enumerable:!0,configurable:!0,get:function(){return i},set:function(t){var e=i;t!==e&&(i=t)}})},o=0,u=n.length;o<u;o++){var s;i()}}}]),t}(),g=function(t,e){var n,r=this;return n=t&&y.has(t,"constructor")?t.constructor:function(){return r.apply(this,arguments)},f(n,r,e),n.prototype=y.create(r.prototype,t),n.prototype.constructor=n,n.__super__=r.prototype,n},b={},j={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},w=function(t){var e=function(e){return t[e]},n="(?:"+Object.keys(t).join("|")+")",r=RegExp(n),i=RegExp(n,"g");return function(t){return t=null==t?"":""+t,r.test(t)?t.replace(i,e):t}};b.escape=w(j);var m={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},O=/(.)^/,E={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},k=/\\|'|\r|\n|\u2028|\u2029/g,P=function(t){return"\\"+E[t]},S="",x={$helpers:{}},M=x.$helpers;u.helper=function(t,e){M[t]=e};var L=function(){function t(e){c(this,t),this._init(e)}return a(t,null,[{key:"$",value:function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(){if(window.jQuery||window.$||$)return window.jQuery||window.$||$;throw new Error("GMP need jQuery or Zepto in window scope named $")})},{key:"_assignPros",value:function(e){f(t.prototype,e)}}]),t}();t(L),n(L),i(L),o(L),L.GMPX=d,L.extend=g,L.template=u,L.Util=y;var q=function(t){function e(t){c(this,e);var n=!!t.init==!0?t.init:null;t.init&&delete t.init;var r=h(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return null!=n?r.on("_on_init",n):"",r.on("_on_after",r._after),r}return l(e,t),a(e,[{key:"_after",value:function(t){if(!t)throw new Error("\u8bf7\u6b63\u786e\u586b\u5199\u5c5e\u6027!");this._create(),this.trigger("_on_init")}},{key:"_create",value:function(t){this.data?this.$el.html(L.template(t)(this.data)):this.$el.html(L.template(t)())}},{key:"_appendTo",value:function(t){var e=t;return e&&(e.jquery||e.nodeType)?$(e)[0]:document.querySelector(e||"body")}},{key:"set",value:function(t,e){var n=this.data[t];this.data[t]=e;var r=this["_on_"+t+"Update"];y.isFunction(r)&&r.call(this,e,n)}},{key:"get",value:function(t){return this.data[t]}}],[{key:"inherits",value:function(t,e){var n=this,r=void 0;return r=t&&y.has(t,"constructor")?t.constructor:function(){return n.apply(this,arguments)},f(r,n,e),r.prototype=y.create(n.prototype,t),r.prototype.constructor=r,r.__super__=n.prototype,r}}]),e}(L);return L.Widgets=function(){},L.Widgets.register=function(t,e){if(null!=this[t])throw new Error("\u5df2\u5b58\u5728\u8be5\u540d\u79f0\u7684Widgets,\u8bf7\u6539\u540d!");this[t]=q.inherits(e)},L.BaseClass=q,L});